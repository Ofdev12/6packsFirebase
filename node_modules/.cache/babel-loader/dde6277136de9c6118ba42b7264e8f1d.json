{"ast":null,"code":"import _classCallCheck from \"/Users/bde-maze/Projects/Sandbox/js/01/6packsFirebase/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/bde-maze/Projects/Sandbox/js/01/6packsFirebase/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/bde-maze/Projects/Sandbox/js/01/6packsFirebase/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/bde-maze/Projects/Sandbox/js/01/6packsFirebase/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/bde-maze/Projects/Sandbox/js/01/6packsFirebase/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/bde-maze/Projects/Sandbox/js/01/6packsFirebase/src/App.js\";\nimport React, { Component } from 'react';\nimport firebase from 'firebase/app';\nimport 'firebase/firestore';\nimport \"./app.css\";\nvar apiKey = process.env.REACT_APP_API_KEY || \"AIzaSyA0d-9Xa0sIbn75OdH8EfKg2m_RxSVJORg\";\nvar projectId = process.env.REACT_APP_PROJECT_ID || \"todos-c769e\";\nvar config = {\n  apiKey: \"AIzaSyBgjQ-aMPoMk4y802oM57HUwAFSEBBlk10\",\n  authDomain: \"yo-todo-d1229.firebaseapp.com\",\n  databaseURL: \"https://yo-todo-d1229.firebaseio.com\",\n  projectId: \"yo-todo-d1229\",\n  storageBucket: \"yo-todo-d1229.appspot.com\",\n  messagingSenderId: \"471773751736\"\n};\nfirebase.initializeApp(config);\nvar db = firebase.firestore();\ndb.settings({\n  timestampsInSnapshots: true\n});\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, App);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(App)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      inputValue: '',\n      todos: []\n    };\n\n    _this.handleSubmit = function (e) {\n      e.preventDefault();\n      var todo = {\n        value: _this.state.inputValue,\n        quantity: 1,\n        archived: false\n      };\n      db.collection('todos').doc(todo.value).set(todo);\n      e.preventDefault();\n\n      _this.setState({\n        inputValue: ''\n      });\n    };\n\n    _this.handleChange = function (e) {\n      _this.setState({\n        inputValue: e.target.value\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      // update state when 'todos' collection changes\n      this.unsubscribe = db.collection('todos').onSnapshot(function (snapshot) {\n        var todos = [];\n        snapshot.forEach(function (doc) {\n          return todos.push(doc.data());\n        });\n\n        _this2.setState({\n          todos: todos\n        });\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.unsubscribe();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"shop\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"block\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, \"Shopping list\"), React.createElement(\"form\", {\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        value: this.state.inputValue,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"submit\",\n        value: \"add\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"block\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, this.state.todos.map(function (todo, i) {\n        return React.createElement(\"ul\", {\n          key: i,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80\n          },\n          __self: this\n        }, React.createElement(\"li\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          onClick: function onClick(e) {\n            return db.collection('todos').doc(todo.value).update({\n              quantity: todo.quantity - 1\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82\n          },\n          __self: this\n        }, \"-\"), React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83\n          },\n          __self: this\n        }, \"( \", todo.quantity, \" )\"), React.createElement(\"button\", {\n          onClick: function onClick(e) {\n            return db.collection('todos').doc(todo.value).update({\n              quantity: todo.quantity + 1\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 84\n          },\n          __self: this\n        }, \"+\"), React.createElement(\"span\", {\n          className: todo.archived ? \"archived\" : \"\",\n          onClick: function onClick(e) {\n            return db.collection('todos').doc(todo.value).update({\n              archived: !todo.archived\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 85\n          },\n          __self: this\n        }, \" \", todo.value, \" \"), React.createElement(\"button\", {\n          onClick: function onClick(e) {\n            return db.collection('todos').doc(todo.value).delete();\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 86\n          },\n          __self: this\n        }, \"x\")));\n      }))));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/Users/bde-maze/Projects/Sandbox/js/01/6packsFirebase/src/App.js"],"names":["React","Component","firebase","apiKey","process","env","REACT_APP_API_KEY","projectId","REACT_APP_PROJECT_ID","config","authDomain","databaseURL","storageBucket","messagingSenderId","initializeApp","db","firestore","settings","timestampsInSnapshots","App","state","inputValue","todos","handleSubmit","e","preventDefault","todo","value","quantity","archived","collection","doc","set","setState","handleChange","target","unsubscribe","onSnapshot","snapshot","forEach","push","data","map","i","update","delete"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\n\nimport firebase from 'firebase/app'\nimport 'firebase/firestore'\nimport \"./app.css\"\n\nconst apiKey = process.env.REACT_APP_API_KEY || \"AIzaSyA0d-9Xa0sIbn75OdH8EfKg2m_RxSVJORg\"\nconst projectId = process.env.REACT_APP_PROJECT_ID || \"todos-c769e\"\n\nvar config = {\n    apiKey: \"AIzaSyBgjQ-aMPoMk4y802oM57HUwAFSEBBlk10\",\n    authDomain: \"yo-todo-d1229.firebaseapp.com\",\n    databaseURL: \"https://yo-todo-d1229.firebaseio.com\",\n    projectId: \"yo-todo-d1229\",\n    storageBucket: \"yo-todo-d1229.appspot.com\",\n    messagingSenderId: \"471773751736\"\n  };\nfirebase.initializeApp(config)\n\nconst db = firebase.firestore()\ndb.settings({ timestampsInSnapshots: true })\n\nclass App extends Component {\n\n  state = {\n    inputValue: '',\n    todos: []\n  }\n\n  handleSubmit = e => {\n    e.preventDefault()\n\n    const todo = {\n      value: this.state.inputValue,\n      quantity: 1,\n      archived: false\n    }\n\n    db.collection('todos').doc(todo.value).set(todo)\n    e.preventDefault()\n    this.setState({ inputValue: ''})\n  }\n\n  handleChange = e => {\n    this.setState({ inputValue: e.target.value })\n  }\n\n\n  componentDidMount() {\n    // update state when 'todos' collection changes\n    this.unsubscribe = db.collection('todos')\n      .onSnapshot(snapshot => {\n        const todos = []\n        snapshot.forEach(doc => todos.push(doc.data()))\n\n        this.setState({ todos })\n      })\n  }\n\n  componentWillUnmount() {\n    this.unsubscribe()\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <div className=\"shop\">\n          { /* Add a new entry */ }\n          <div className=\"block\">\n            <h2>Shopping list</h2>\n            <form onSubmit={this.handleSubmit}>\n              <input type=\"text\" value={this.state.inputValue} onChange={this.handleChange} />\n              <input type=\"submit\" value=\"add\" />\n            </form>\n          </div>\n\n          { /* Modify an entry */ }\n          <div className=\"block\">\n            { this.state.todos.map((todo, i) =>\n              <ul key={i}>\n                <li>\n                  <button onClick={e => db.collection('todos').doc(todo.value).update({ quantity: todo.quantity - 1 })}>-</button>\n                  <span>( {todo.quantity} )</span>\n                  <button onClick={e => db.collection('todos').doc(todo.value).update({ quantity: todo.quantity + 1 })}>+</button>\n                  <span className={ todo.archived ? \"archived\" : \"\" } onClick={e => db.collection('todos').doc(todo.value).update({ archived : !todo.archived })}> {todo.value} </span>\n                  <button onClick={e => db.collection('todos').doc(todo.value).delete()}>x</button>\n                </li>\n              </ul>) }\n          </div>\n\n        </div>\n      </div>\n    )\n  }\n}\nexport default App\n"]},"metadata":{},"sourceType":"module"}